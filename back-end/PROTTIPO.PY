import mysql.connector

# --------------------------------------------
# 1. CONECTARSE A LA BASE DE DATOS
# --------------------------------------------
def conectar_db():
    return mysql.connector.connect(
        host="localhost",
        user="root",          # <-- cÃ¡mbialo si tienes otro usuario
        password="12345",          # <-- agrega tu contraseÃ±a si tienes
        database="chatbot_demo"
    )

# --------------------------------------------
# 2. GUARDAR DATOS DEL FORMULARIO
# --------------------------------------------
def guardar_formulario(nombre, edad):
    db = conectar_db()
    cursor = db.cursor()

    sql = "INSERT INTO formulario (nombre, edad) VALUES (%s, %s)"
    cursor.execute(sql, (nombre, edad))

    db.commit()
    cursor.close()
    db.close()

# --------------------------------------------
# 3. CHATBOT SIMPLE
# --------------------------------------------
def chatbot():
    print("Hola ðŸ‘‹, soy el chatbot de prueba.")
    print("Te harÃ© unas preguntas bÃ¡sicas...\n")

    nombre = input("Â¿CuÃ¡l es tu nombre? âž¤ ")
    edad = input("Â¿CuÃ¡l es tu edad? âž¤ ")

    # Validar edad
    if not edad.isdigit():
        print("La edad debe ser un nÃºmero. Intenta otra vez.")
        return

    # Guardar en MySQL
    guardar_formulario(nombre, int(edad))

    print("\nÂ¡Gracias! ðŸ™Œ Tus datos han sido registrados correctamente.")
    print("Fin del prototipo.")

# --------------------------------------------
# 4. EJECUCIÃ“N
# --------------------------------------------
if __name__ == "__main__":
    chatbot()
